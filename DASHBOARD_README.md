# Trading Signals Dashboard

A real-time Next.js 14 dashboard for visualizing and monitoring trading signals generated by the Trading Bot 2.0 system.

## Features

- **Real-time Signal Display**: View all active and past trading signals with entry prices, stop loss, and take profit levels
- **Multiple View Modes**: Toggle between table view for detailed comparison and card view for visual scanning
- **Auto-refresh**: Automatically poll the API every 5-60 seconds for the latest signals
- **Comprehensive Filtering**:
  - Filter by signal status (Active, Filled, Closed)
  - Filter by asset (BTC, ETH, XRP, SOL, USD/JPY, EUR/USD, GBP/USD)
  - Filter by asset type (Crypto, Forex)
  - Filter by signal type (BUY, SELL)
- **Performance Metrics**:
  - Win rate percentage for closed signals
  - Average profit/loss
  - Count of active, closed, and total signals
- **Take Profit Levels**: All three TP levels automatically calculated and displayed (40%, 35%, 25% split)
- **Color Coding**:
  - Green for bullish (BUY) signals
  - Red for bearish (SELL) signals
  - Status indicators (Active = Blue, Filled = Yellow, Closed = Gray)
- **Responsive Design**: Fully responsive layout optimized for desktop, tablet, and mobile devices
- **Dark Mode Support**: Beautiful dark mode enabled by default with light mode available

## Architecture

### Technology Stack

- **Framework**: Next.js 14 with App Router
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **UI Components**: Custom components built with shadcn/ui patterns
- **Database**: SQLite via Prisma ORM (shared with backend)
- **Icons**: Lucide React

### Project Structure

```
app/
├── page.tsx                    # Main dashboard page
├── layout.tsx                  # Root layout with providers
├── globals.css                 # Global Tailwind styles
├── providers.tsx               # Theme provider
└── api/
    └── signals/
        └── route.ts            # API endpoint for fetching signals

components/
├── ui/
│   └── button.tsx             # Reusable button component
├── metrics-card.tsx           # Performance metrics card
├── signals-table.tsx          # Table view for signals
├── signals-card.tsx           # Individual signal card
├── signals-grid.tsx           # Grid view for signals
└── signals-filter.tsx         # Filter controls

lib/
├── utils.ts                   # Utility functions (formatting, etc.)
└── types.ts                   # TypeScript type definitions
```

## API Integration

### GET /api/signals

Fetches trading signals from the database with optional filtering.

**Query Parameters:**
- `status` (optional): Filter by signal status - 'active', 'filled', 'closed'
- `asset` (optional): Filter by specific asset (BTCUSDT, ETHUSDT, EUR/USD, etc.)
- `assetType` (optional): Filter by asset type - 'crypto' or 'forex'
- `signalType` (optional): Filter by signal type - 'BUY' or 'SELL'
- `limit` (default: 100): Maximum number of signals to return
- `offset` (default: 0): Pagination offset

**Response:**
```json
{
  "signals": [
    {
      "id": "uuid",
      "asset": "BTCUSDT",
      "timeframe": "1h",
      "entryPrice": 45000.50,
      "takeProfit": 46500.00,
      "stopLoss": 44000.00,
      "status": "active",
      "signalType": "BUY",
      "metadata": {
        "assetType": "crypto",
        "rsi": 28.5,
        "macd": { "macd": 0.15, "signal": 0.10, "histogram": 0.05 },
        "volumeRatio": 1.8,
        "volatility": 0.025
      },
      "createdAt": "2024-01-15T10:30:00Z",
      "updatedAt": "2024-01-15T10:30:00Z"
    }
  ],
  "total": 150,
  "metrics": {
    "winRate": 62.5,
    "avgProfit": 125.50,
    "totalSignals": 45,
    "closedSignals": 40,
    "activeSignals": 5
  }
}
```

## Installation & Setup

### 1. Install Dependencies

```bash
npm install
```

### 2. Environment Configuration

Ensure `.env` file is configured (see `.env.example`):

```env
DATABASE_URL="file:./dev.db"
BINANCE_API_URL="https://api.binance.com"
FINNHUB_API_URL="https://finnhub.io/api/v1"
```

### 3. Database Setup

The Prisma migrations should already be applied. If needed:

```bash
npm run prisma:migrate
```

### 4. Run the Dashboard

Development mode:
```bash
npm run dev
```

Production build:
```bash
npm run build
npm run start
```

The dashboard will be available at `http://localhost:3000`

## Usage Guide

### 1. Dashboard Overview
- **Top Section**: Header with auto-refresh controls
- **Metrics Grid**: 5-card display showing key performance indicators
- **Filter Bar**: Apply filters to narrow down signals
- **Signals Display**: Main content area with table/grid toggle

### 2. Filtering Signals
1. Click any filter button (Status, Asset, Type, Signal)
2. Select the desired filter value
3. Click "Clear Filter" to remove individual filters
4. Click "Clear All" to remove all active filters

### 3. View Modes

**Table View:**
- Best for comparing signals side-by-side
- All details visible in columns
- Toggle with List icon button

**Grid View:**
- Best for visual scanning
- Cards showing price levels and indicators
- Risk/reward ratio displayed
- Toggle with Grid icon button

### 4. Auto-Refresh
- Toggle "Auto-refresh" checkbox to enable/disable
- Select refresh interval (5s, 10s, 15s, 30s, 1m)
- Manual refresh available with Refresh button

## Signal Details Explanation

### Take Profit Levels (TP)
Automatically calculated as a 3-part profit ladder:
- **TP1 (40%)**: 40% of position closed at 1/3 of profit range
- **TP2 (35%)**: 35% of position closed at 2/3 of profit range
- **TP3 (25%)**: Remaining 25% closed at full take profit level

### Risk/Reward Ratio
Calculated as: (TP - Entry) / (Entry - SL)

Example: 2:1 ratio means potential 2x profit for 1x risk

### Signal Indicators
- **RSI**: Relative Strength Index (0-100 scale)
- **MACD**: Moving Average Convergence Divergence with histogram
- **Volume**: Volume ratio to 20-period average
- **Volatility**: ATR-based volatility percentage

## Performance Metrics

### Win Rate
Percentage of closed signals that resulted in profit: (Wins / Total Closed) × 100

### Average Profit/Loss
Mean profit/loss across all closed signals

### Signal Counts
- **Active**: Currently open signals awaiting exit
- **Filled**: Partially exited signals
- **Closed**: Fully exited completed trades

## Troubleshooting

### Signals Not Updating
1. Check browser console for errors (F12)
2. Verify database connection: `sqlite3 prisma/dev.db "SELECT COUNT(*) FROM Signal;"`
3. Ensure signal provider service is running: `npm run dev:backend`
4. Check auto-refresh is enabled and interval is set

### No Signals Displayed
1. Verify database has signal records
2. Check filters aren't too restrictive
3. Try "Clear All" filters
4. Refresh the page

### API Errors
1. Check `/api/signals` endpoint directly in browser or curl
2. Verify Prisma client is generated: `npm run prisma:generate`
3. Check database file exists at `prisma/dev.db`

## Performance Optimization

The dashboard includes:
- **Memoization**: Component-level optimization with React
- **Server-side filtering**: Filters applied at API level
- **Pagination**: Limit results to 100 per request
- **Caching**: Reuse data between refreshes when possible

## Mobile Responsiveness

The dashboard is fully responsive:
- **Mobile (< 768px)**: Single column layout, stacked cards
- **Tablet (768px - 1024px)**: 2-column layout, optimized filters
- **Desktop (> 1024px)**: Full multi-column display with all details visible

## Contributing

When modifying the dashboard:
1. Follow the existing component structure
2. Use TypeScript for type safety
3. Maintain responsive design principles
4. Run tests: `npm run lint && npm run format:check`
5. Fix issues: `npm run lint:fix && npm run format`

## License

Same as parent Trading Bot 2.0 project
